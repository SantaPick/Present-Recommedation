# 심리테스트 질문 응답별 가중치 규칙

## 질문 유형별 가중치 계산 방법

### 1. 5-point 질문 (5_point_question)
- **응답 범위**: 1(매우 아님) ~ 5(매우 맞음)
- **질문 형태**: "(1) vs (2)" 형태 → 1쪽으로 갈수록 (1), 5쪽으로 갈수록 (2)
- **가중치 계산**:
  - 1 → 0.2
  - 2 → 0.4  
  - 3 → 0.6
  - 4 → 0.8
  - 5 → 1.0
- **음수 관계시**: 가중치에 -1 곱하기 (예: 1 → -0.2, 5 → -1.0)

### 2. 2-choice 질문 (2_choice_question)
- **응답 범위**: response_1 또는 response_2 선택
- **가중치 계산**:
  - 양수 관계(+): 0.7
  - 음수 관계(-): -0.7

### 3. O-X 질문 (O_X_question)
- **응답 범위**: O 또는 X 선택
- **가중치 계산**:
  - 양수 관계(+): 0.7
  - 음수 관계(-): -0.7

### 4. 4-choice 질문 (4_choice_question)
- **응답 범위**: response_1 ~ response_4 중 선택
- **가중치 계산**:
  - 양수 관계(+): 0.7
  - 음수 관계(-): -0.7

## 특수 케이스 처리

### Emotion 질문 처리
- **파일**: `4-choice-question.csv`
- **방법**: 선택한 응답의 `Emotion_response_X`와 `pn_response_X` 확인
- **가중치**: 해당 Emotion 노드에 pn 값에 따라 ±0.7

### Pref_ 노드 처리 (concept 질문)
- **대상 노드**: Pref_Elegant → Elegant, Pref_Cute → Cute, 등등 (Pref_ 제거)
- **참조 파일**: `emotion-concept-relation.csv`
- **방법**: 
  1. Pref_ 노드 점수 계산 (5-point 규칙 적용)
  2. `emotion-concept-relation.csv`에서 해당 Emotion의 다른 concept 관계 확인
  3. +/- 표시에 따라 다른 concept 노드에도 가중치 적용
- **추가 가중치 계산**: 1→0.05, 2→0.1, 3→0.15, 4→0.2, 5→0.25
- **적용 방법**: 양의 관계(+)면 +가중치, 음의 관계(-)면 -가중치
- **예시**: Pref_Elegant에 4 선택 → Texture_Smoothness, Brand에 각각 +0.2 적용
- **범위 제한**: 최종 가중치가 ±1 초과시 ±1로 클리핑

## 최종 가중치 범위
- **모든 가중치**: -1.0 ~ 1.0 범위 내
- **범위 초과 처리**: 양수면 1.0으로, 음수면 -1.0으로 클리핑

## 노드별 점수 집계
- **동일 노드 다중 질문**: 평균값 사용
- **최종 사용자 프로필**: 각 노드별 최종 점수 (-1 ~ 1)